<!DOCTYPE html>
<html>
<head>
    <title>email-campaign-tool</title>
    <link rel="stylesheet" type="text/css" href="stylesheet/grids-min.css">
    <link rel="stylesheet/less" type="text/css" href="stylesheet/index.less">
    <script src="javascript/less.js" type="text/javascript"></script>
    <script src="javascript/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">
    <div id="menu-bar" class="yui3-menu yui3-menu-horizontal"><!-- Bounding box -->
        <div class="yui3-menu-content"><!-- Content box -->
            <ul>
                <li>
                    <a class="yui3-menu-label" href="/campaign"><em>New Campaign</em></a>
                </li>
                <li>
                    <a class="yui3-menu-label" href="/design"><em>Design</em></a>
                </li>
                <li>
                    <a class="yui3-menu-label" href="/preview"><em>Preview</em></a>
                </li>
                <li>
                    <a class="yui3-menu-label" href="/recipients"><em>Recipients</em></a>
                </li>
                <li>
                    <a class="yui3-menu-label" href="/test"><em>Test</em></a>
                </li>
                <li>
                    <a class="yui3-menu-label" href="/launch"><em>Launch</em></a>
                </li>
                <li>
                    <a class="yui3-menu-label" href="/results"><em>Results</em></a>
                </li>
            </ul>
        </div>
    </div>
    <div id="wrapper" >

    </div>

    <script type="text/x-template" id="campaign-content">

    </script>

    <script type="text/javascript">
        YUI().use('node','event', function (Y) {
            Y.use('node-menunav', function(Y) {
                //for the css grid
                var menu = Y.one("#menu-bar");
                menu.plug(Y.Plugin.NodeMenuNav);
            });
            Y.use('handlebars', function (Y) {
                // Handlebars is available and ready for use. Add implementation
                // code here.
            });

        });
        YUI().use('app',function(Y){
            Y.EmailApp = Y.Base.create('emailApp', Y.App, [], {

                showCampaignPage: function(req){
                    this.showView('page',
                            {page: "campaign" });
                },
                showDesignPage:function(req){
                    this.showView('page',
                            {page: "design" });
                },
                showPreviewPage:function(req){
                    this.showView('page',
                            {page: "preview" });
                },
                initializer: function () {
                    this.once('ready', function (e) {
                        if (this.hasRoute(this.getPath())) {
                            this.dispatch();
                        } else {
                            this.showCampaignPage();
                        }
                    });
                },
                views: {
                    page: {type: 'PageView'}
                }
            },{
                ATTRS:{
                    routes: {
                        value: [
                            {path: '/', callbacks: 'showCampaignPage'},
                            {path: '/campaign', callbacks: 'showCampaignPage'},
                            {path: '/design', callbacks: 'showDesignPage'},
                            {path: '/preview', callbacks: 'showDesignPage'},
                            {path: '/recipients', callbacks: 'showDesignPage'},
                            {path: '/test', callbacks: 'showDesignPage'},
                            {path: '/launch', callbacks: 'showDesignPage'},
                            {path: '/results', callbacks: 'showDesignPage'}
                        ]

                    }
                }
            });
            Y.PageView = Y.Base.create('pageView', Y.View, [], {
                template: '<p>This is {name} page</p>' +
                        '<button>Go</button>',

                render: function () {
                    var page = this.get('page'),
                        content = Y.Lang.sub(this.template, {name: page});
//                    this.get('container').set('text', 'This is ' + page + ' Page!');
                    this.get('container').setHTML(content);
                    return this;
                }
            });
            var app = new Y.EmailApp({
                serverRouting: true,
                viewContainer: '#wrapper'
            });


//            app.render().save('campaign');
            app.render();
        });
    </script>
</body>
</html>